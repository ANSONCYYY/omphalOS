version: "1.0"
checks:
  - name: "narratives_present"
    kind: "file_count_min"
    params:
      globs:
        - "exports/narratives/*.md"
      min: 1
    severity: "HIGH"
    message: "Narratives are present."

  - name: "warehouse_present"
    kind: "file_count_min"
    params:
      globs:
        - "warehouse/warehouse.sqlite"
      min: 1
    severity: "HIGH"
    message: "Warehouse materialization exists."

  - name: "match_rate_strict"
    kind: "metric_threshold"
    params:
      metric: "match_rate"
      op: ">="
      value: 0.95
    severity: "HIGH"
    message: "Entity resolution match rate meets strict threshold."

  - name: "review_fraction_strict"
    kind: "metric_threshold"
    params:
      metric: "review_fraction"
      op: "<="
      value: 0.05
    severity: "HIGH"
    message: "Review queue remains tightly bounded."

  - name: "evidence_packets_schema_valid"
    kind: "schema_validate_glob"
    params:
      glob: "exports/packets/*.json"
      schema: "contracts/schemas/evidence_packet_contract.schema.json"
    severity: "HIGH"
    message: "Evidence packets validate against contract schema."

  - name: "briefing_tables_nonempty"
    kind: "csv_row_count_min"
    params:
      glob: "exports/briefing_tables/*.csv"
      min_rows: 2
    severity: "MEDIUM"
    message: "Briefing tables contain at least one data row."

  - name: "determinism_report_pass"
    kind: "json_field_equals"
    params:
      path: "reports/determinism_report.json"
      field: "status"
      value: "PASS"
    severity: "HIGH"
    message: "Determinism report status is PASS."

  - name: "publishability_report_pass"
    kind: "json_field_equals"
    params:
      path: "reports/publishability_report.json"
      field: "status"
      value: "PASS"
    severity: "HIGH"
    message: "Publishability report status is PASS."

  - name: "sbom_manifest_present"
    kind: "schema_validate_glob"
    params:
      glob: "reports/sbom_manifest.json"
      schema: "contracts/schemas/sbom_manifest.schema.json"
    severity: "MEDIUM"
    message: "SBOM manifest is present and schema-valid."
